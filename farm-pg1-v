local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local teleporting = false  -- Comenzamos sin teletransporte

-- Lista de NPCs específicos que queremos buscar
local npcNames = {
    "Headless",
    "Juuzou",
    "Eto Yoshimura",
    "Amon",
    "Kaneki"
}

local function teleportToFirstNPC()
    local npcFolder = workspace:FindFirstChild("NPCs"):FindFirstChild("Alive")

    if npcFolder then
        for _, npc in ipairs(npcFolder:GetChildren()) do
            if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") then
                -- Verificamos si el NPC está en nuestra lista de nombres
                for _, name in ipairs(npcNames) do
                    if npc.Name == name then
                        -- Teletransportar al jugador al NPC encontrado
                        character:SetPrimaryPartCFrame(npc.HumanoidRootPart.CFrame)
                        return  -- Salimos después de teletransportarnos al primer NPC
                    end
                end
            end
        end
        print("No se encontraron NPCs en la carpeta Alive.")
    else
        print("No se encontró la carpeta de Alive.")
    end
end

local function startTeleporting()
    teleporting = true
    while teleporting do
        teleportToFirstNPC()
        wait(1) -- Espera un segundo entre teletransportes (ajusta si es necesario)

        -- Aseguramos que el personaje esté disponible en caso de que muera
        if not player.Character or not player.Character:FindFirstChild("HumanoidRootPart") then
            player.CharacterAdded:Wait()  -- Esperamos a que el personaje se vuelva a generar
            character = player.Character
        end
    end
end

-- Conectar la tecla G para activar el teletransporte
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessedEvent)
    if input.KeyCode == Enum.KeyCode.G and not gameProcessedEvent and not teleporting then
        startTeleporting()
    end
end)
